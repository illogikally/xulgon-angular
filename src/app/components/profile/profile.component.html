<div  class="profile-header">
  <div class="flex-center">
    <div class="cover-avatar">
      <div class="cover">
        <img [src]="userProfile?.coverPhotoUrl">
      </div>
      <div class="avatar-container flex-center">
        <div class="avatar">
          <img [src]="userProfile?.avatarUrl">
        </div>
        <div class="change-avatar">

        </div>
      </div>
    </div>
  </div>
  <div class="flex-center">
    <h1 [ngClass]="{loading: userProfile === undefined}" class="profile-name flex-center">
      {{ userProfile?.lastName + " " + userProfile?.firstName }}
    </h1>
  </div>
  <div class="flex-center">
    <div class="actions-menu">
      <ul class="profile-menu">
        <li>
          <div class="flex-center">
            Bài viết
          </div>
        </li>
        <li>
          <div class="flex-center">
            Bạn bè
          </div>
        </li>
        <li>
          <div class="flex-center">
            Ảnh
          </div>
        </li>
      </ul>
      <div 
      class="profile-actions">
        <button 
        *ngIf="userProfile?.friendshipStatus == 'NULL'"
        (click)="sendFriendRequest()" 
        id="add-friend">
          <i class='bx bxs-user-plus' ></i><span>Thêm bạn bè</span>
        </button>

        <button 
        *ngIf="userProfile?.friendshipStatus == 'FRIEND'"
        (click)="onFriendClick()" 
        #friend
        id="friend-opts">
          <i class='bx bxs-user-check' ></i><span>Bạn bè</span>
          <div  
          (clickOutside)="closeFriendOpts($event)"
          *ngIf="showFriendOpts" 
          class="button-opts">
            <div (click)="unfriend()">Huỷ bỏ bạn bè</div>
          </div>
        </button>

        <button 
        *ngIf="userProfile?.friendshipStatus == 'SEND'"
        (click)="deleteFriendRequest()" 
        id="delete-friend-request">
          <i class='bx bxs-user-x' ></i><span>Huỷ lời mời</span>
        </button>

        <button 
        *ngIf="userProfile?.friendshipStatus == 'RECEIVED'"
        (click)="onReplyFriendRequestClicked()" 
        #replyFriendRequest
        id="reply-friend-request">
          <i class='bx bxs-user-check' ></i><span>Trả lời</span>
          <div  
          (clickOutside)="closeReplyFriendRequestOpts($event)"
          *ngIf="showReplyRequestOpts" 
          class="button-opts">
            <div (click)="acceptFriendRequest()">Đồng ý</div>
            <div (click)="deleteFriendRequest()">Xoá lời mời</div>
          </div>
        </button>

        <button 
        id="send-message"
        *ngIf="userProfile?.friendshipStatus != undefined">
          <i class='bx bxs-message-square-dots' ></i>
          <span>Nhắn tin</span>
        </button>
      </div>
    </div>
  </div>
</div>
<div class="profile-body">
  <div class="content">
    <!-- <div class="content"> -->
      <!-- <div class='sidebar-container'> -->
        <div 
        class="sidebar">
            <div class="intro">
              <h2>Giới thiệu</h2>
              <div style="margin-bottom: 10px;" class="loading" *ngIf="!userProfile"></div>
              <div style="margin-bottom: 10px;" class="loading" *ngIf="!userProfile"></div>
              <div style="margin-bottom: 10px;" class="loading" *ngIf="!userProfile"></div>
              <div *ngIf="userProfile?.workplace">
                <i class='bx bxs-building-house' ></i>
                <span>Làm việc tại {{ userProfile?.workplace }}</span>
              </div>

              <div *ngIf="userProfile?.school">
                <i class='bx bxs-graduation' ></i>
                <span>Học tại {{ userProfile?.school }}</span>
              </div>
              <div *ngIf="userProfile?.hometown">
                <i class='bx bx-current-location'></i>
                <span>Đang sống tại {{ userProfile?.hometown }}</span>   
              </div>
            </div>
            <div class="photo-intro">
              <div class="intro-title">
                <h2>Ảnh</h2>
              </div>
              <div class="photo">
                <div *ngIf="!userProfile" style="background-color: #ddd;"></div>
                <div *ngIf="!userProfile" style="background-color: #ddd;"></div>
                <div *ngIf="!userProfile" style="background-color: #ddd;"></div>
                <div *ngFor="let photo of userProfile?.photos" >
                  <app-photo 
                  [photo]="photo" 
                  ></app-photo>
                </div>
              </div>
            </div>
            <div class="friend-intro">
              <div>
                <h2>Bạn bè</h2>
              </div>
              <div class="friend">

                <div *ngFor="let friend of userProfile?.friends">
                  <div class="img-container">
                    <a routerLink="/{{ friend?.id }}">
                      <img [src]="friend.avatarUrl">
                    </a>
                  </div>
                  <a routerLink="/{{ friend?.id }}">
                    <div class="username">{{ friend.username }}</div>
                  </a>
                  <div *ngIf="friend.commonFriendCount > 0" class="common-friend-count">
                    {{ friend.commonFriendCount }}
                    <span> bạn chung</span>
                  </div>
                </div>
            </div>
          </div>
        </div>
      <!-- </div> -->
      <div class="timeline">
        <div class="post-container">
          <app-post-list [pageId]="profileId"></app-post-list>
        </div>
      </div>
    <!-- </div> -->
  </div>
</div>
<!-- <div *ngIf="pageNotFound" class="page-not-exist">
  <h1>Trang này không tồn tại.</h1>
</div> -->
