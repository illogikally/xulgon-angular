<div  class="profile-header">
  <div class="flex-center">
    <div class="cover-avatar">
      <div class="cover">
        <img [src]="userProfile?.coverPhotoUrl">
        <div 
        *ngIf="userProfile?.id == loggedInUserProfileId"
        (click)="showUpdateProfilePic('cover')"
        class="change-cover">
          <i class='bx bxs-camera'></i>
          <span>Thay ảnh bìa</span>
        </div>
      </div>
      <div class="avatar-container flex-center">
        <div class="avatar">
          <img [src]="userProfile?.avatarUrl">
        </div>
        <div 
        *ngIf="userProfile?.id == loggedInUserProfileId"
        (click)="showUpdateProfilePic('avatar')"
        class="change-avatar">
          <i class='bx bxs-camera'></i>
          
        </div>
      </div>
    </div>
  </div>
  <div class="flex-center">
    <h1 [ngClass]="{loading: userProfile === undefined}" class="profile-name flex-center">
      {{ userProfile?.lastName + " " + userProfile?.firstName }}
    </h1>
  </div>
  <div class="flex-center">
    <div class="actions-menu">
      <ul class="profile-menu">
        <li 
        [ngClass]="{'tab-active': currentTab == ''}">

          <a 
          (click)="changeCurrentTab($event, '')"
          href="http://localhost:4200/{{userProfile?.id}}"> 
            <div class="flex-center">
              <span>Bài viết</span> 
            </div>
          </a>
        </li>
        <li
        [ngClass]="{'tab-active': currentTab == 'friends'}">
          <a 
          (click)="changeCurrentTab($event, 'friends')"
          href="http://localhost:4200/{{userProfile?.id}}/friends">
            <div class="flex-center">
              <span>Bạn bè</span>
            </div>
          </a>
        </li>
        <li
        [ngClass]="{'tab-active': currentTab == 'photos'}">
          <a
          href="http://localhost:4200/{{userProfile?.id}}/friends"
          (click)="changeCurrentTab($event, 'photos')">
            <div class="flex-center">
              Ảnh
            </div>
          </a>
        </li>
      </ul>
      <div 
      class="profile-actions">
        <button 
        *ngIf="userProfile?.friendshipStatus == 'NULL'"
        (click)="sendFriendRequest()" 
        id="add-friend">
          <i class='bx bxs-user-plus' ></i><span>Thêm bạn bè</span>
        </button>

        <button 
        *ngIf="userProfile?.friendshipStatus == 'FRIEND'"
        (click)="onFriendClick()" 
        #friend
        id="friend-opts">
          <i class='bx bxs-user-check' ></i><span>Bạn bè</span>
          <div  
          (clickOutside)="closeFriendOpts($event)"
          *ngIf="showFriendOpts" 
          class="button-opts">
            <div (click)="unfriend()">
              <i class='bx bx-user-x' ></i>
              <span>Huỷ bỏ bạn bè</span>
            </div>
          </div>
        </button>

        <button 
        *ngIf="userProfile?.friendshipStatus == 'SEND'"
        (click)="deleteFriendRequest()" 
        id="delete-friend-request">
          <i class='bx bxs-user-x' ></i><span>Huỷ lời mời</span>
        </button>

        <button 
        *ngIf="userProfile?.friendshipStatus == 'RECEIVED'"
        (click)="onReplyFriendRequestClicked()" 
        #replyFriendRequest
        id="reply-friend-request">
          <i class='bx bxs-user-check' ></i><span>Trả lời</span>
          <div  
          (clickOutside)="closeReplyFriendRequestOpts($event)"
          *ngIf="showReplyRequestOpts" 
          class="button-opts">
            <div (click)="acceptFriendRequest()">Đồng ý</div>
            <div (click)="deleteFriendRequest()">Xoá lời mời</div>
          </div>
        </button>

        <button 
        id="send-message"
        *ngIf="userProfile?.friendshipStatus != undefined">
          <i class='bx bxs-message-square-dots' ></i>
          <span>Nhắn tin</span>
        </button>
      </div>
    </div>
  </div>
</div>
<div class="profile-body">
  <div class="content-container">

    <app-profile-timeline
    [profileLoaded]="profileLoaded"
    *ngIf="loadedTabs.has('')"
    [ngClass]="{'hidden': currentTab !== ''}"
    ></app-profile-timeline>

    <app-friend-list
    [ngClass]="{'hidden': currentTab != 'friends'}"
    [profileId]="userProfile?.id"
    *ngIf="loadedTabs.has('friends')">
    </app-friend-list>

    <app-photo-list
    *ngIf="loadedTabs.has('photos')"
    [ngClass]="{'hidden': currentTab !== 'photos'}"
    >

    </app-photo-list>

  </div>
  <!-- <app-profile-timeline [userProfile]="userProfile" [profileId]="userProfile.id"></app-profile-timeline> -->
</div>
<app-pick-avatar
*ngIf="isUpdateAvatar"
(closeMe)="isUpdateAvatar = false"
></app-pick-avatar>
<!-- <div *ngIf="pageNotFound" class="page-not-exist">
  <h1>Trang này không tồn tại.</h1>
</div> -->
