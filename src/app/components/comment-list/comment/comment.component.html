<div class="comment">
  <div>
    <div class="comment-avatar">
      <app-user-ref
        [userDto]="commentResponse.user"
        borderRadius="50%"
      ></app-user-ref>
    </div>
  </div>
  <div class="comment-right">
    <div style="display: flex;">
      <div class="comment-body">
        <div class="comment-username">
          <app-user-ref
            [userDto]="commentResponse.user"
          ></app-user-ref>
        </div>
        <div>
          {{ commentResponse.body }}
        </div>
        <div class="reaction-count" *ngIf="commentResponse.reactionCount > 0">
          <img src="assets/like-16x16.png"> 
          {{ commentResponse.reactionCount}}
        </div>
      </div>
      <div class="comment-options-container">
        <div class="comment-options">
          <i class='bx bx-dots-horizontal-rounded'></i>
        </div>
      </div>

    </div>
    <div *ngIf="commentResponse.photo" class="comment-media">
      <app-photo
      [isComment]="true"
      [photo]="commentResponse.photo" [style]="'height'">
      </app-photo>
    </div>
    <div class="comment-meta">
      <span
      class="comment-like hover-underline"
      [ngClass]="{'reacted': commentResponse.isReacted}"
      (click)="like()">
        <span class="w500">Thích</span>
      </span>
      <span> · </span>

      <span
      class="comment-reply hover-underline"
      *ngIf="!(commentResponse.parentType == 'COMMENT')"
      (click)="showReplies()">
        <span class="w500">Trả lời</span>
        <span> · </span>
      </span>

      <span class="comment-time-ago">
        {{ commentResponse.createdAgo }}
      </span>
    </div>
    <div class="comment-reply-container">
      <div class="placeholder">
        <span 
        class="hover-underline"
        *ngIf="
          commentResponse.parentType != 'COMMENT' 
          && !isRepliesVisible 
          && commentResponse.replyCount
        "
        (click)="showReplies()">
          <i class='bx bx-subdirectory-right'></i> 
          {{ commentResponse.replyCount }} trả lời
        </span>
      </div>
      <div>
        <app-comment-list
        *ngIf="isRepliesVisible"
        [totalCommentCount]="commentResponse.replyCount"
        [parentId]="commentResponse.postId"
        [targetId]="commentResponse.id">
        </app-comment-list>
      </div>
    </div>
  </div>
</div>
